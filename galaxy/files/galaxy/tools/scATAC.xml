<tool id="scATAC" name="scATAC" version="1.0.0">
    <description>- parse barcodes from scATAC-seq data</description>

    <requirements>
<!--
command -v bowtie2 >/dev/null 2>&1 || { echo >&2 "scATAC requires bowtie2 but it is not installed. Aborting."; exit 1; }
command -v samtools >/dev/null 2>&1 || { echo >&2 "scATAC requires samtools but it is not installed. Aborting."; exit 1; }
command -v java >/dev/null 2>&1 || { echo >&2 "scATAC requires java but it is not installed. Aborting."; exit 1; }
-->

    </requirements>

    <command>
        <![CDATA[
            scATAC
            -t $threads
            -f $R1_fastq
            -r $R2_fastq
            -d $mismatch
            -m $minread
        ]]>
    </command>

    <!--
      -b '/home/pds28/Seoyeon/barcodes'
      -p '/programs/picard-tools-1.98/MarkDuplicates.jar'
      -n MC
      -g '/shared_data/data/Mus_musculus_UCSC_mm10/Bowtie2Index/genome'
      > MC.log
    -->

    <inputs>
        <param name="threads" type="integer" value="1" min="1" label="Set threads for Bowtie2 mapping, sorting and duplication removal" />
        <param name="R1_fastq" type="data" format="fastq.gz" label="fastq.gz file that contains forward reads (only .gz allowed)" />
        <param name="R2_fastq" type="data" format="fastq.gz" label="astq.gz file that contains reverse reads (only .gz allowed)" />

        <param name="mismatch" type="integer" value="2" min="0" label="Max barcode mismatch allowed for barcode error correction" />
        <param name="minread" type="integer" value="10" min="1" label="Cells with reads less than MIN_READ will be filtered" />

<!--
-t  THREADS                 Set threads for Bowtie2 mapping, sorting and duplication removal [1].
-f  R1                      fastq.gz file that contains forward reads (only .gz allowed).
-r  R2                      fastq.gz file that contains reverse reads (only .gz allowed).
-d  MAX_BARCODE_MISMATCH    max barcode mismatch allowed for barcode error correction [2].
-m  MIN_READ                cells with reads less than MIN_READ will be filtered [500].

-b  BARCODE_DIR             folder that contains r7_ATAC, i7_ATAC, i5_ATAC and r5_ATAC barcode.
-p  MARK_DUPLICATE          path to picard MarkDuplicates.jar [MarkDuplicates.jar].
-n  PREFIX                  prefix of output files.
-g  BOWTIE2_GENOME          Bowtie2 indexed reference genome.
-->

    </inputs>

    <outputs>
        <data name="output_log" type="data" format="tabular"  label="Output log file"/>
        <data name="output_bam" type="data" format="bam"  label="Output aligned BAM file"/>

    </outputs>

    <tests>
    </tests>

    <help>
**What it does**

Decomplex single-cell ATAC-seq barcode allowing mismatch.
Provided by:
https://raw.githubusercontent.com/epigen-UCSD/snATAC_pipeline/master/bin/scATAC_debarcode

    </help>

</tool>
